{"version":3,"mappings":"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","names":["RichTextEditor","value","onChange","placeholder","editorRef","useRef","quillRef","useEffect","quillInstance","__vitePreload","Quill","html","jsx","CreateNewsModal","onClose","onCreated","slug","setSlug","useState","priority","setPriority","date","setDate","startDate","setStartDate","expireDate","setExpireDate","titles","setTitles","descriptions","setDescriptions","loading","setLoading","error","setError","firstTitle","slugify","handleCreate","payload","token","res","err","handleTitleChange","lang","prev","handleDescriptionChange","jsxs","e","Button","EditNewsModal","news","onUpdated","handleUpdate","ConfirmDeleteNewsModal","onConfirm","onCancel","title","NewsManager","role","useOutletContext","setNews","showCreateModal","setShowCreateModal","editNews","setEditNews","newsToDelete","setNewsToDelete","fetchNews","data","handleConfirmDelete","newsArray","id","item","ConfirmDeleteModal"],"ignoreList":[],"sources":["../../../src/components/ComplexComponents/AdminDashboard/UI/RichTextEditor/RichTextEditor.jsx","../../../src/components/ComplexComponents/AdminDashboard/NewsManager/CreateNewsModal.jsx","../../../src/components/ComplexComponents/AdminDashboard/NewsManager/EditNewsModal.jsx","../../../src/components/ComplexComponents/AdminDashboard/NewsManager/ConfirmDeleteNewsModal.jsx","../../../src/components/ComplexComponents/AdminDashboard/NewsManager/NewsManager.jsx"],"sourcesContent":["import { useEffect, useRef } from 'react';\r\nimport 'quill/dist/quill.snow.css';\r\nimport '../../../../../styles/components/ComplexComponents/Admin/RichTextEditor.scss';\r\n\r\nexport default function RichTextEditor({ value, onChange, placeholder = '' }) {\r\n  const editorRef = useRef(null);\r\n  const quillRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    let quillInstance;\r\n\r\n    if (!editorRef.current) return;\r\n\r\n    import('quill').then(({ default: Quill }) => {\r\n      quillInstance = new Quill(editorRef.current, {\r\n        theme: 'snow',\r\n        placeholder,\r\n        modules: {\r\n          toolbar: [\r\n            [{ header: [2, 3, 4, false] }],\r\n            ['bold', 'italic', 'underline', 'link'],\r\n            [{ list: 'ordered' }, { list: 'bullet' }],\r\n            [{ color: ['#48AE5A', '#F24942', '#000000', '#FFFFFF', false] }],\r\n            [{ background: ['#48AE5A', '#F24942', '#000000', '#FFFFFF', false] }],\r\n            [{ align: [] }],\r\n            ['clean'],\r\n          ],\r\n        },\r\n      });\r\n\r\n      if (value) {\r\n        quillInstance.clipboard.dangerouslyPasteHTML(value);\r\n      }\r\n\r\n      quillInstance.on('text-change', () => {\r\n        const html = quillInstance.root.innerHTML;\r\n        onChange(html);\r\n      });\r\n\r\n      quillRef.current = quillInstance;\r\n    });\r\n\r\n    return () => {\r\n      if (quillRef.current) {\r\n        quillRef.current.off('text-change');\r\n        quillRef.current = null;\r\n        quillInstance = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (quillRef.current && value !== quillRef.current.root.innerHTML) {\r\n      quillRef.current.clipboard.dangerouslyPasteHTML(value || '');\r\n    }\r\n  }, [value]);\r\n\r\n  return <div className=\"custom-quill-editor\" ref={editorRef} />;\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport Button from '../../../Button/Button';\r\nimport slugify from 'slugify';\r\nimport RichTextEditor from '../UI/RichTextEditor/RichTextEditor';\r\n\r\nfunction CreateNewsModal({ onClose, onCreated }) {\r\n  const [slug, setSlug] = useState('');\r\n  const [priority, setPriority] = useState('B');\r\n  const [date, setDate] = useState('');\r\n  const [startDate, setStartDate] = useState('');\r\n  const [expireDate, setExpireDate] = useState('');\r\n  const [titles, setTitles] = useState({ ru: '', en: '' });\r\n  const [descriptions, setDescriptions] = useState({ ru: '', en: '' });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  useEffect(() => {\r\n    if (!slug.trim()) {\r\n      const firstTitle = titles.ru || titles.en;\r\n      if (firstTitle.trim()) {\r\n        setSlug(slugify(firstTitle, { lower: true, strict: true }));\r\n      }\r\n    }\r\n  }, [titles.ru, titles.en]);\r\n\r\n  const handleCreate = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    const payload = {\r\n      slug,\r\n      priority,\r\n      dates: { date, startDate, expireDate },\r\n      titles,\r\n      descriptions,\r\n    };\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const res = await fetch('/api/admin/news', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const err = await res.json();\r\n        throw new Error(err?.error || 'Ошибка создания новости');\r\n      }\r\n\r\n      onCreated();\r\n      onClose();\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleTitleChange = (lang, value) => {\r\n    setTitles((prev) => ({ ...prev, [lang]: value }));\r\n  };\r\n\r\n  const handleDescriptionChange = (lang, value) => {\r\n    setDescriptions((prev) => ({ ...prev, [lang]: value }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"aam_modal\">\r\n      <div className=\"aam_modal__content\">\r\n        <h3 className=\"aam_modal__title\">Создать новость</h3>\r\n        {error && <p className=\"aam_modal__error\">{error}</p>}\r\n\r\n        <input\r\n          className=\"aam_modal__input\"\r\n          type=\"text\"\r\n          placeholder=\"Автоматически сгенерируется из заголовка\"\r\n          value={slug}\r\n          onChange={(e) => setSlug(e.target.value)}\r\n        />\r\n\r\n        <select\r\n          className=\"aam_modal__input\"\r\n          value={priority}\r\n          onChange={(e) => setPriority(e.target.value)}\r\n        >\r\n          <option value=\"A\">Приоритет A</option>\r\n          <option value=\"B\">Приоритет B</option>\r\n        </select>\r\n\r\n        <label htmlFor=\"publishDate\">\r\n          Дата публикации\r\n          <input\r\n            className=\"aam_modal__input\"\r\n            type=\"date\"\r\n            id=\"publishDate\"\r\n            value={date}\r\n            onChange={(e) => setDate(e.target.value)}\r\n          />\r\n        </label>\r\n\r\n        <label htmlFor=\"startDate\">\r\n          Начало отображения\r\n          <input\r\n            className=\"aam_modal__input\"\r\n            type=\"date\"\r\n            id=\"startDate\"\r\n            value={startDate}\r\n            onChange={(e) => setStartDate(e.target.value)}\r\n          />\r\n        </label>\r\n\r\n        <label htmlFor=\"expireDate\">\r\n          Конец отображения\r\n          <input\r\n            className=\"aam_modal__input\"\r\n            type=\"date\"\r\n            id=\"expireDate\"\r\n            value={expireDate}\r\n            onChange={(e) => setExpireDate(e.target.value)}\r\n          />\r\n        </label>\r\n\r\n        <hr className=\"aam_modal__divider\" />\r\n\r\n        {['ru', 'en'].map((lang) => (\r\n          <div key={lang}>\r\n            <h4>Язык: {lang.toUpperCase()}</h4>\r\n\r\n            <input\r\n              className=\"aam_modal__input\"\r\n              type=\"text\"\r\n              placeholder={`Заголовок (${lang})`}\r\n              value={titles[lang]}\r\n              onChange={(e) => handleTitleChange(lang, e.target.value)}\r\n            />\r\n\r\n            <RichTextEditor\r\n              value={descriptions[lang]}\r\n              onChange={(value) => handleDescriptionChange(lang, value)}\r\n              placeholder={`Описание (${lang})`}\r\n            />\r\n          </div>\r\n        ))}\r\n\r\n        <div className=\"aam_modal__actions\">\r\n          <Button type=\"submit\" variant=\"green\" label={loading ? 'Создание...' : 'Создать'} onClick={handleCreate} disabled={loading} />\r\n          <Button type=\"reset\" variant=\"green\" label=\"Отмена\" onClick={onClose} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreateNewsModal;\r\n","import React, { useState } from 'react';\r\nimport Button from '../../../Button/Button';\r\nimport RichTextEditor from '../UI/RichTextEditor/RichTextEditor';\r\n\r\nfunction EditNewsModal({ news, onClose, onUpdated }) {\r\n  const [slug, setSlug] = useState(news.slug);\r\n  const [priority, setPriority] = useState(news.priority);\r\n  const [date, setDate] = useState(news.dates?.date || '');\r\n  const [startDate, setStartDate] = useState(news.dates?.startDate || '');\r\n  const [expireDate, setExpireDate] = useState(news.dates?.expireDate || '');\r\n  const [titles, setTitles] = useState(news.titles || { ru: '', en: '' });\r\n  const [descriptions, setDescriptions] = useState(news.descriptions || { ru: '', en: '' });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleUpdate = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    const payload = {\r\n      slug,\r\n      priority,\r\n      dates: { date, startDate, expireDate },\r\n      titles,\r\n      descriptions,\r\n    };\r\n\r\n    try {\r\n      const token = localStorage.getItem('authToken');\r\n      const res = await fetch(`/api/admin/news/${news.id}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n        },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const err = await res.json();\r\n        throw new Error(err?.error || 'Ошибка обновления');\r\n      }\r\n\r\n      onUpdated(); // обновим список\r\n      onClose();   // закроем модалку\r\n    } catch (err) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleTitleChange = (lang, value) => {\r\n    setTitles((prev) => ({ ...prev, [lang]: value }));\r\n  };\r\n\r\n  const handleDescriptionChange = (lang, value) => {\r\n    setDescriptions((prev) => ({ ...prev, [lang]: value }));\r\n  };\r\n\r\n  return (\r\n    <div className=\"aam_modal\">\r\n      <div className=\"aam_modal__content\">\r\n        <h3 className=\"aam_modal__title\">Редактировать новость</h3>\r\n        {error && <p className=\"aam_modal__error\">{error}</p>}\r\n\r\n        <input\r\n          className=\"aam_modal__input\"\r\n          type=\"text\"\r\n          placeholder=\"Slug\"\r\n          value={slug}\r\n          onChange={(e) => setSlug(e.target.value)}\r\n        />\r\n\r\n        <select\r\n          className=\"aam_modal__input\"\r\n          value={priority}\r\n          onChange={(e) => setPriority(e.target.value)}\r\n        >\r\n          <option value=\"A\">Приоритет A</option>\r\n          <option value=\"B\">Приоритет B</option>\r\n        </select>\r\n\r\n        <input\r\n          className=\"aam_modal__input\"\r\n          type=\"date\"\r\n          placeholder=\"Дата публикации\"\r\n          value={date}\r\n          onChange={(e) => setDate(e.target.value)}\r\n        />\r\n\r\n        <input\r\n          className=\"aam_modal__input\"\r\n          type=\"date\"\r\n          placeholder=\"Начало отображения\"\r\n          value={startDate}\r\n          onChange={(e) => setStartDate(e.target.value)}\r\n        />\r\n\r\n        <input\r\n          className=\"aam_modal__input\"\r\n          type=\"date\"\r\n          placeholder=\"Конец отображения\"\r\n          value={expireDate}\r\n          onChange={(e) => setExpireDate(e.target.value)}\r\n        />\r\n\r\n        <hr className=\"aam_modal__divider\" />\r\n\r\n        {['ru', 'en'].map((lang) => (\r\n          <div key={lang}>\r\n            <h4>Язык: {lang.toUpperCase()}</h4>\r\n\r\n            <input\r\n              className=\"aam_modal__input\"\r\n              type=\"text\"\r\n              placeholder={`Заголовок (${lang})`}\r\n              value={titles[lang]}\r\n              onChange={(e) => handleTitleChange(lang, e.target.value)}\r\n            />\r\n\r\n            <RichTextEditor\r\n              value={descriptions[lang]}\r\n              onChange={(value) => handleDescriptionChange(lang, value)}\r\n              placeholder={`Описание (${lang})`}\r\n            />\r\n          </div>\r\n        ))}\r\n\r\n        <div className=\"aam_modal__actions\">\r\n          <Button type=\"submit\" variant=\"green\" label={loading ? 'Сохранение...' : 'Сохранить'} onClick={handleUpdate} disabled={loading} />\r\n          <Button type=\"reset\" variant=\"green\" label=\"Отмена\" onClick={onClose} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditNewsModal;\r\n","import React from 'react';\r\nimport Button from '../../../Button/Button';\r\n\r\nfunction ConfirmDeleteNewsModal({ onConfirm, onCancel, title }) {\r\n  return (\r\n    <div className=\"aam_modal\">\r\n      <div className=\"aam_modal__content\">\r\n        <h3 className=\"aam_modal__title\">Удаление новости</h3>\r\n        <p className=\"aam_modal__text\">\r\n          Вы уверены, что хотите удалить новость <strong>{title}</strong>?\r\n        </p>\r\n        <div className=\"aam_modal__actions\">\r\n          <Button type=\"submit\" label=\"Удалить\" variant=\"danger\" onClick={onConfirm} />\r\n          <Button type=\"reset\" label=\"Отмена\" variant=\"green\" onClick={onCancel} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ConfirmDeleteNewsModal;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useOutletContext } from 'react-router-dom';\r\nimport CreateNewsModal from './CreateNewsModal.jsx';\r\nimport EditNewsModal from './EditNewsModal.jsx';\r\nimport ConfirmDeleteModal from './ConfirmDeleteNewsModal.jsx';\r\nimport '../../../../styles/components/ComplexComponents/Admin/UserManager.scss';\r\n\r\nfunction NewsManager() {\r\n  const { role } = useOutletContext();\r\n\r\n  // Разрешаем только admin и superadmin работать с новостями\r\n  if (role !== 'admin' && role !== 'superadmin') {\r\n    return <p>У вас нет прав для управления новостями.</p>;\r\n  }\r\n\r\n  const [news, setNews] = useState({});\r\n  const [loading, setLoading] = useState(true);\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [editNews, setEditNews] = useState(null);\r\n  const [newsToDelete, setNewsToDelete] = useState(null);\r\n\r\n  const fetchNews = () => {\r\n    setLoading(true);\r\n    const token = localStorage.getItem('authToken');\r\n\r\n    fetch('/api/admin/news', {\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    })\r\n      .then(async (res) => {\r\n        if (!res.ok) throw new Error('Ошибка загрузки новостей');\r\n        const data = await res.json();\r\n        setNews(data);\r\n      })\r\n      .catch((err) => console.error('Ошибка загрузки новостей:', err))\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchNews();\r\n  }, []);\r\n\r\n  const handleConfirmDelete = async () => {\r\n    if (!newsToDelete) return;\r\n\r\n    const token = localStorage.getItem('authToken');\r\n\r\n    try {\r\n      const res = await fetch(`/api/admin/news/${newsToDelete}`, {\r\n        method: 'DELETE',\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const err = await res.json();\r\n        throw new Error(err?.error || 'Ошибка удаления новости');\r\n      }\r\n\r\n      setNewsToDelete(null);\r\n      fetchNews();\r\n    } catch (err) {\r\n      alert(err.message);\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Загрузка новостей...</p>;\r\n\r\n  // Преобразуем объект новостей в массив [id, news]\r\n  const newsArray = Object.entries(news);\r\n\r\n  return (\r\n    <div className=\"aam_news-manager\">\r\n      <h2>Управление новостями</h2>\r\n      <button className=\"aam-news-btn aam-news-btn--add\" onClick={() => setShowCreateModal(true)}>\r\n        ➕ Новая новость\r\n      </button>\r\n\r\n      {newsArray.length === 0 ? (\r\n        <p>Новостей пока нет.</p>\r\n      ) : (\r\n        <table className=\"aam_news-manager__table\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Slug</th>\r\n              <th>Priority</th>\r\n              <th>Дата</th>\r\n              <th>Заголовок (RU)</th>\r\n              <th>Действия</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {newsArray.map(([id, item]) => (\r\n              <tr key={id}>\r\n                <td>{id}</td>\r\n                <td>{item.slug}</td>\r\n                <td>{item.priority}</td>\r\n                <td>{item.dates.date ? new Date(item.dates.date).toLocaleDateString('ru-RU') : '-'}</td>\r\n                <td>{item.titles.ru || '-'}</td>\r\n                <td>\r\n                  <button className=\"aam-news-btn aam-news-btn--edit\" onClick={() => setEditNews({ id, ...item })}>\r\n                    ✏️\r\n                  </button>\r\n                  <button className=\"aam-news-btn aam-news-btn--delete\" onClick={() => setNewsToDelete(id)}>\r\n                    🗑️\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n\r\n      {showCreateModal && (\r\n        <CreateNewsModal onClose={() => setShowCreateModal(false)} onCreated={fetchNews} />\r\n      )}\r\n\r\n      {editNews && (\r\n        <EditNewsModal news={editNews} onClose={() => setEditNews(null)} onUpdated={fetchNews} />\r\n      )}\r\n\r\n      {newsToDelete && (\r\n        <ConfirmDeleteModal\r\n          username={news[newsToDelete]?.titles.ru || `Новость #${newsToDelete}`}\r\n          onConfirm={handleConfirmDelete}\r\n          onCancel={() => setNewsToDelete(null)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewsManager;\r\n"],"file":"assets/NewsManager-Bc3TZv2s.js"}