{"version":3,"file":"DetailedNews-DrhgGlGp.js","sources":["../../../src/components/ComplexComponents/DetailedNewsMain/DetailedNewsMain.jsx","../../../src/pages/DetailedNews/DetailedNews.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport slugify from 'slugify';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport LeftArrowIcon from '../../SVGIcons/LeftArrowIcon';\r\nimport '../../../styles/components/ComplexComponents/DetailedNewsMain.scss';\r\n\r\nimport newsDataFallback from '../../../data/newsData.json';\r\n\r\nfunction DetailedNewsMain() {\r\n  const { t, i18n } = useTranslation();\r\n  const { id } = useParams();\r\n  const currentLanguage = i18n.language;\r\n\r\n  const [newsData, setNewsData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    async function fetchNews() {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const res = await fetch('/api/admin/news');\r\n        if (!res.ok) throw new Error(`API error ${res.status}`);\r\n\r\n        const data = await res.json();\r\n\r\n        // Преобразуем объект в массив с добавлением slug\r\n        const processed = Object.entries(data).map(([newsId, item]) => {\r\n          const baseTitle = item.titles?.en || item.titles?.ru || `news-${newsId}`;\r\n          return {\r\n            id: newsId,\r\n            ...item,\r\n            slug: item.slug || slugify(baseTitle, { lower: true, strict: true }),\r\n          };\r\n        });\r\n\r\n        setNewsData(processed);\r\n      } catch (err) {\r\n        console.warn('Ошибка загрузки API, используем fallback:', err.message);\r\n\r\n        // fallback — тоже массив с slug\r\n        const fallbackProcessed = Object.entries(newsDataFallback).map(([newsId, item]) => {\r\n          const baseTitle = item.titles?.en || item.titles?.ru || `news-${newsId}`;\r\n          return {\r\n            id: newsId,\r\n            ...item,\r\n            slug: item.slug || slugify(baseTitle, { lower: true, strict: true }),\r\n          };\r\n        });\r\n\r\n        setNewsData(fallbackProcessed);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    fetchNews();\r\n  }, []);\r\n\r\n  if (loading) return <div>{t('loading')}</div>;\r\n  if (error) return <div>{t('error')}: {error}</div>;\r\n  if (!newsData) return <div>{t('detailedNewsMain.notFound')}</div>;\r\n\r\n  const newsItem = newsData.find(item => item.id === id || item.slug === id);\r\n\r\n  if (!newsItem) {\r\n    return (\r\n      <div className=\"aam_detailed-news__block\">\r\n        <h2>{t('detailedNewsMain.notFound')}</h2>\r\n        <Link to=\"/news\">{t('detailedNewsMain.backToNews')}</Link>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const formatDate = (date) => {\r\n    if (!date) return '';\r\n    const options = { year: 'numeric', month: 'long', day: 'numeric' };\r\n    return new Date(date).toLocaleDateString(currentLanguage, options);\r\n  };\r\n\r\n  return (\r\n    <main className=\"aam_detailed-news\">\r\n      <div className=\"aam_detailed-news__breadcrumbs\">\r\n        <Link to=\"/\">{t('breadCrumbs.home')}</Link> / <Link to=\"/news\">{t('breadCrumbs.news')}</Link> / {t('breadCrumbs.detailedNews')}\r\n      </div>\r\n\r\n      <h1 className=\"aam_detailed-news__header\">{t('detailedNewsMain.name')}</h1>\r\n\r\n      <div className=\"aam_detailed-news__block\">\r\n        <h2 className=\"aam_detailed-news__title\">\r\n          {newsItem.titles[currentLanguage] || newsItem.titles.ru}\r\n        </h2>\r\n        <p\r\n          className=\"aam_detailed-news__description\"\r\n          dangerouslySetInnerHTML={{ __html: newsItem.descriptions[currentLanguage] || newsItem.descriptions.ru || '' }}\r\n        />\r\n        <p className=\"aam_detailed-news__footer\">\r\n          <strong>{t('detailedNewsMain.date')}:</strong> {formatDate(newsItem.dates.date)}\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"aam_detailed-news__site-nav\">\r\n        <Link to=\"/news\" className=\"aam_detailed-news__back-to-news\">\r\n          <LeftArrowIcon className=\"icon\" />\r\n          {t('detailedNewsMain.backToNews')}\r\n        </Link>\r\n        <div className=\"aam_detailed-news__back\">\r\n          <Link to=\"/\">{t('newsBlock.backHome')}</Link>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default DetailedNewsMain;\r\n","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Header from '../../components/ComplexComponents/Header/Header';\r\nimport Navigation from '../../components/ComplexComponents/Navigation/Navigation';\r\nimport SearchInput from '../../components/SearchInput/SearchInput';\r\nimport Footer from '../../components/ComplexComponents/Footer/Footer';\r\nimport SecondaryFooter from '../../components/SecondaryFooter/SecondaryFooter';\r\nimport DetailedNewsMain from '../../components/ComplexComponents/DetailedNewsMain/DetailedNewsMain';\r\n\r\nfunction DetailedNews() {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{t('pageTitles.detailedNews')}</title>\r\n        <meta name=\"description\" content=\"Описание компании Берлио\" />\r\n        <meta name=\"keywords\" content=\"Берлио, Новости\" />\r\n        <meta name=\"author\" content=\"AndreiMikheikin\" />\r\n      </Helmet>\r\n\r\n      <Header />\r\n      <Navigation />\r\n      <SearchInput placeholder={t('search')} />\r\n      <DetailedNewsMain />\r\n      <Footer />\r\n      <SecondaryFooter />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DetailedNews;\r\n"],"names":["DetailedNewsMain","t","i18n","useTranslation","id","useParams","currentLanguage","newsData","setNewsData","useState","loading","setLoading","error","setError","useEffect","fetchNews","res","data","processed","newsId","item","baseTitle","slugify","err","fallbackProcessed","newsDataFallback","jsx","jsxs","newsItem","Link","formatDate","date","options","LeftArrowIcon","DetailedNews","Fragment","Helmet","Header","Navigation","SearchInput","Footer","SecondaryFooter"],"mappings":"wUAUA,SAASA,GAAmB,CAC1B,KAAM,CAAE,EAAAC,EAAG,KAAAC,CAAA,EAASC,EAAA,EACd,CAAE,GAAAC,CAAA,EAAOC,EAAA,EACTC,EAAkBJ,EAAK,SAEvB,CAACK,EAAUC,CAAW,EAAIC,EAAAA,SAAS,IAAI,EACvC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,IAAI,EA6CvC,GA3CAK,EAAAA,UAAU,IAAM,CACd,eAAeC,GAAY,CACzBJ,EAAW,EAAI,EACfE,EAAS,IAAI,EACb,GAAI,CACF,MAAMG,EAAM,MAAM,MAAM,iBAAiB,EACzC,GAAI,CAACA,EAAI,GAAI,MAAM,IAAI,MAAM,aAAaA,EAAI,MAAM,EAAE,EAEtD,MAAMC,EAAO,MAAMD,EAAI,KAAA,EAGjBE,EAAY,OAAO,QAAQD,CAAI,EAAE,IAAI,CAAC,CAACE,EAAQC,CAAI,IAAM,CAC7D,MAAMC,EAAYD,EAAK,QAAQ,IAAMA,EAAK,QAAQ,IAAM,QAAQD,CAAM,GACtE,MAAO,CACL,GAAIA,EACJ,GAAGC,EACH,KAAMA,EAAK,MAAQE,EAAQD,EAAW,CAAE,MAAO,GAAM,OAAQ,EAAA,CAAM,CAAA,CAEvE,CAAC,EAEDb,EAAYU,CAAS,CACvB,OAASK,EAAK,CACZ,QAAQ,KAAK,4CAA6CA,EAAI,OAAO,EAGrE,MAAMC,EAAoB,OAAO,QAAQC,CAAgB,EAAE,IAAI,CAAC,CAACN,EAAQC,CAAI,IAAM,CACjF,MAAMC,EAAYD,EAAK,QAAQ,IAAMA,EAAK,QAAQ,IAAM,QAAQD,CAAM,GACtE,MAAO,CACL,GAAIA,EACJ,GAAGC,EACH,KAAMA,EAAK,MAAQE,EAAQD,EAAW,CAAE,MAAO,GAAM,OAAQ,EAAA,CAAM,CAAA,CAEvE,CAAC,EAEDb,EAAYgB,CAAiB,CAC/B,QAAA,CACEb,EAAW,EAAK,CAClB,CACF,CAEAI,EAAA,CACF,EAAG,CAAA,CAAE,EAEDL,EAAS,OAAOgB,EAAAA,IAAC,MAAA,CAAK,SAAAzB,EAAE,SAAS,EAAE,EACvC,GAAIW,EAAO,OAAOe,EAAAA,KAAC,MAAA,CAAK,SAAA,CAAA1B,EAAE,OAAO,EAAE,KAAGW,CAAA,EAAM,EAC5C,GAAI,CAACL,EAAU,aAAQ,MAAA,CAAK,SAAAN,EAAE,2BAA2B,EAAE,EAE3D,MAAM2B,EAAWrB,EAAS,KAAKa,GAAQA,EAAK,KAAOhB,GAAMgB,EAAK,OAAShB,CAAE,EAEzE,GAAI,CAACwB,EACH,OACED,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAI,SAAAzB,EAAE,2BAA2B,CAAA,CAAE,QACnC4B,EAAA,CAAK,GAAG,QAAS,SAAA5B,EAAE,6BAA6B,CAAA,CAAE,CAAA,EACrD,EAIJ,MAAM6B,EAAcC,GAAS,CAC3B,GAAI,CAACA,EAAM,MAAO,GAClB,MAAMC,EAAU,CAAE,KAAM,UAAW,MAAO,OAAQ,IAAK,SAAA,EACvD,OAAO,IAAI,KAAKD,CAAI,EAAE,mBAAmBzB,EAAiB0B,CAAO,CACnE,EAEA,OACEL,EAAAA,KAAC,OAAA,CAAK,UAAU,oBACd,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAD,MAACG,EAAA,CAAK,GAAG,IAAK,SAAA5B,EAAE,kBAAkB,EAAE,EAAO,YAAI4B,EAAA,CAAK,GAAG,QAAS,SAAA5B,EAAE,kBAAkB,EAAE,EAAO,MAAIA,EAAE,0BAA0B,CAAA,EAC/H,QAEC,KAAA,CAAG,UAAU,4BAA6B,SAAAA,EAAE,uBAAuB,EAAE,EAEtE0B,EAAAA,KAAC,MAAA,CAAI,UAAU,2BACb,SAAA,CAAAD,EAAAA,IAAC,KAAA,CAAG,UAAU,2BACX,SAAAE,EAAS,OAAOtB,CAAe,GAAKsB,EAAS,OAAO,EAAA,CACvD,EACAF,EAAAA,IAAC,IAAA,CACC,UAAU,iCACV,wBAAyB,CAAE,OAAQE,EAAS,aAAatB,CAAe,GAAKsB,EAAS,aAAa,IAAM,EAAA,CAAG,CAAA,EAE9GD,EAAAA,KAAC,IAAA,CAAE,UAAU,4BACX,SAAA,CAAAA,OAAC,SAAA,CAAQ,SAAA,CAAA1B,EAAE,uBAAuB,EAAE,GAAA,EAAC,EAAS,IAAE6B,EAAWF,EAAS,MAAM,IAAI,CAAA,CAAA,CAChF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,8BACb,SAAA,CAAAA,EAAAA,KAACE,EAAA,CAAK,GAAG,QAAQ,UAAU,kCACzB,SAAA,CAAAH,EAAAA,IAACO,EAAA,CAAc,UAAU,MAAA,CAAO,EAC/BhC,EAAE,6BAA6B,CAAA,EAClC,EACAyB,EAAAA,IAAC,MAAA,CAAI,UAAU,0BACb,SAAAA,EAAAA,IAACG,EAAA,CAAK,GAAG,IAAK,SAAA5B,EAAE,oBAAoB,CAAA,CAAE,CAAA,CACxC,CAAA,CAAA,CACF,CAAA,EACF,CAEJ,CCzGA,SAASiC,GAAe,CACtB,KAAM,CAAE,EAAAjC,CAAA,EAAME,EAAA,EAEd,OACEwB,EAAAA,KAAAQ,WAAA,CACE,SAAA,CAAAR,OAACS,EAAA,CACC,SAAA,CAAAV,EAAAA,IAAC,QAAA,CAAO,SAAAzB,EAAE,yBAAyB,CAAA,CAAE,EACrCyB,EAAAA,IAAC,OAAA,CAAK,KAAK,cAAc,QAAQ,2BAA2B,EAC5DA,EAAAA,IAAC,OAAA,CAAK,KAAK,WAAW,QAAQ,kBAAkB,EAChDA,EAAAA,IAAC,OAAA,CAAK,KAAK,SAAS,QAAQ,iBAAA,CAAkB,CAAA,EAChD,QAECW,EAAA,EAAO,QACPC,EAAA,EAAW,EACZZ,EAAAA,IAACa,EAAA,CAAY,YAAatC,EAAE,QAAQ,CAAA,CAAG,QACtCD,EAAA,EAAiB,QACjBwC,EAAA,EAAO,QACPC,EAAA,CAAA,CAAgB,CAAA,EACnB,CAEJ"}