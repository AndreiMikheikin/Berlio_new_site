import{c as v,r as o,j as e,L as l,H as y}from"./index-HWUfzzpA.js";import{H as M,N as D,S as L,F as S,a as F}from"./SecondaryFooter-B_q7NUf_.js";import{s as _}from"./slugify-DOqBg0Ac.js";import{L as T}from"./LeftArrowIcon-Dr-Wjj_t.js";import{n as H}from"./newsData-CPduxGqq.js";import{u as f}from"./useTranslation-CO_HoI3e.js";function E(){const{t:s,i18n:N}=f(),{id:u}=v(),c=N.language,[w,h]=o.useState(null),[p,j]=o.useState(!0),[x,b]=o.useState(null);if(o.useEffect(()=>{async function a(){j(!0),b(null);try{const t=await fetch("/api/admin/news");if(!t.ok)throw new Error(`API error ${t.status}`);const m=await t.json(),d=Object.entries(m).map(([n,i])=>{const k=i.titles?.en||i.titles?.ru||`news-${n}`;return{id:n,...i,slug:i.slug||_(k,{lower:!0,strict:!0})}});h(d)}catch(t){console.warn("Ошибка загрузки API, используем fallback:",t.message);const m=Object.entries(H).map(([d,n])=>{const i=n.titles?.en||n.titles?.ru||`news-${d}`;return{id:d,...n,slug:n.slug||_(i,{lower:!0,strict:!0})}});h(m)}finally{j(!1)}}a()},[]),p)return e.jsx("div",{children:s("loading")});if(x)return e.jsxs("div",{children:[s("error"),": ",x]});if(!w)return e.jsx("div",{children:s("detailedNewsMain.notFound")});const r=w.find(a=>a.id===u||a.slug===u);if(!r)return e.jsxs("div",{className:"aam_detailed-news__block",children:[e.jsx("h2",{children:s("detailedNewsMain.notFound")}),e.jsx(l,{to:"/news",children:s("detailedNewsMain.backToNews")})]});const g=a=>{if(!a)return"";const t={year:"numeric",month:"long",day:"numeric"};return new Date(a).toLocaleDateString(c,t)};return e.jsxs("main",{className:"aam_detailed-news",children:[e.jsxs("div",{className:"aam_detailed-news__breadcrumbs",children:[e.jsx(l,{to:"/",children:s("breadCrumbs.home")})," / ",e.jsx(l,{to:"/news",children:s("breadCrumbs.news")})," / ",s("breadCrumbs.detailedNews")]}),e.jsx("h1",{className:"aam_detailed-news__header",children:s("detailedNewsMain.name")}),e.jsxs("div",{className:"aam_detailed-news__block",children:[e.jsx("h2",{className:"aam_detailed-news__title",children:r.titles[c]||r.titles.ru}),e.jsx("p",{className:"aam_detailed-news__description",dangerouslySetInnerHTML:{__html:r.descriptions[c]||r.descriptions.ru||""}}),e.jsxs("p",{className:"aam_detailed-news__footer",children:[e.jsxs("strong",{children:[s("detailedNewsMain.date"),":"]})," ",g(r.dates.date)]})]}),e.jsxs("div",{className:"aam_detailed-news__site-nav",children:[e.jsxs(l,{to:"/news",className:"aam_detailed-news__back-to-news",children:[e.jsx(T,{className:"icon"}),s("detailedNewsMain.backToNews")]}),e.jsx("div",{className:"aam_detailed-news__back",children:e.jsx(l,{to:"/",children:s("newsBlock.backHome")})})]})]})}function B(){const{t:s}=f();return e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsx("title",{children:s("pageTitles.detailedNews")}),e.jsx("meta",{name:"description",content:"Описание компании Берлио"}),e.jsx("meta",{name:"keywords",content:"Берлио, Новости"}),e.jsx("meta",{name:"author",content:"AndreiMikheikin"})]}),e.jsx(M,{}),e.jsx(D,{}),e.jsx(L,{placeholder:s("search")}),e.jsx(E,{}),e.jsx(S,{}),e.jsx(F,{})]})}export{B as default};
//# sourceMappingURL=DetailedNews-pbcOKigG.js.map
