{"version":3,"file":"AdminDashboardPage-BFq2PClU.js","sources":["../../../src/components/ComplexComponents/AdminDashboard/AdminMenu/AdminMenu.jsx","../../../src/components/ComplexComponents/AdminDashboard/AdminDashboard.jsx","../../../src/pages/AdminDashboardPage/AdminDashboardPage.jsx"],"sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { NavLink } from 'react-router-dom';\r\nimport '../../../../styles/components/ComplexComponents/Admin/AdminMenu.scss';\r\n\r\nfunction AdminMenu({ items }) {\r\n  return (\r\n    <nav className=\"aam_admin-menu\">\r\n      <ul className=\"aam_admin-menu__list\">\r\n        {items.map(({ label, to }) => (\r\n          <li key={to} className=\"aam_admin-menu__item\">\r\n            <NavLink\r\n              to={to}\r\n              end\r\n              className={({ isActive }) =>\r\n                `aam_admin-menu__link${isActive ? ' aam_admin-menu__link--active' : ''}`\r\n              }\r\n            >\r\n              {label}\r\n            </NavLink>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </nav>\r\n  );\r\n}\r\n\r\nAdminMenu.propTypes = {\r\n  items: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      label: PropTypes.string.isRequired,\r\n      to: PropTypes.string.isRequired,\r\n    })\r\n  ).isRequired,\r\n};\r\n\r\nexport default AdminMenu;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useNavigate, Outlet } from 'react-router-dom';\r\nimport AdminMenu from './AdminMenu/AdminMenu';\r\nimport '../../../styles/components/ComplexComponents/Admin/AdminDashboard.scss';\r\n\r\nfunction AdminDashboard() {\r\n  const [message, setMessage] = useState('');\r\n  const [role, setRole] = useState('');\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchSecureInfo = async () => {\r\n      const token = localStorage.getItem('authToken');\r\n      if (!token) {\r\n        navigate('/administrator');\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await fetch('/api/admin/secure', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        if (res.status === 401) {\r\n          throw new Error('Unauthorized');\r\n        }\r\n\r\n        if (!res.ok) {\r\n          throw new Error('Ошибка сервера');\r\n        }\r\n\r\n        const data = await res.json();\r\n        setMessage(data.message);\r\n        setRole(data.role);\r\n      } catch (err) {\r\n        localStorage.removeItem('authToken');\r\n        navigate('/administrator');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchSecureInfo();\r\n  }, [navigate]);\r\n\r\n  if (loading) return <p className=\"aam_admin-dashboard__loading\">Загрузка...</p>;\r\n\r\n  const menuItems = [\r\n    { label: 'Панель управления', to: '/adminDashboard' },\r\n    { label: 'Администраторы', to: '/adminDashboard/users' },\r\n    { label: 'Новости', to: '/adminDashboard/news' },\r\n    { label: 'SQL Explorer', to: '/adminDashboard/sql-explorer' },\r\n    { label: 'Настройки', to: '/adminDashboard/settings' },\r\n  ];\r\n\r\n  return (\r\n    <section className=\"aam_admin-dashboard\">\r\n      {/* Верхняя панель */}\r\n      <header className=\"aam_admin-dashboard__header\">\r\n        <p className=\"aam_admin-dashboard__welcome\">{message}</p>\r\n        <p className=\"aam_admin-dashboard__role\">{role}</p>\r\n        <button\r\n          className=\"aam_admin-dashboard__logout\"\r\n          onClick={() => {\r\n            localStorage.removeItem('authToken');\r\n            navigate('/administrator');\r\n          }}\r\n        >\r\n          Выход\r\n        </button>\r\n      </header>\r\n\r\n      {/* Основной блок: меню + контент */}\r\n      <div className=\"aam_admin-dashboard__wrapper\">\r\n        <aside className=\"aam_admin-dashboard__wrapper-tools\">\r\n          <AdminMenu items={menuItems} />\r\n        </aside>\r\n\r\n        <main className=\"aam_admin-dashboard__wrapper-outlet\">\r\n          <Outlet context={{ role }} />\r\n        </main>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AdminDashboard;\r\n","import React from 'react';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport { useTranslation } from 'react-i18next';\r\nimport AdminDashboard from '../../components/ComplexComponents/AdminDashboard/AdminDashboard';\r\nimport '../../styles/pages/AdminDashboardPage.scss';\r\n\r\nfunction AdminDashboardPage() {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <div className=\"aam_admin-dashboard-page\">\r\n      <Helmet>\r\n        <title>{t('pageTitles.adminDashboard')}</title>\r\n        <meta name=\"description\" content={t('adminDashboard.pageDescription')} />\r\n      </Helmet>\r\n\r\n      <AdminDashboard />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminDashboardPage;\r\n"],"names":["AdminMenu","items","jsx","label","to","NavLink","isActive","PropTypes","AdminDashboard","message","setMessage","useState","role","setRole","loading","setLoading","navigate","useNavigate","useEffect","token","res","data","menuItems","jsxs","Outlet","AdminDashboardPage","t","useTranslation","Helmet"],"mappings":"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"}