import{r as s,j as e,B as p,n as f}from"./index-RDm8gRJE.js";/* empty css                    */function y({onClose:o,onCreated:i}){const[d,x]=s.useState(""),[h,_]=s.useState(""),[u,j]=s.useState(!1),[c,l]=s.useState(""),m=async()=>{j(!0),l("");try{const t=localStorage.getItem("authToken"),n=await fetch("/api/admin/admins",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({username:d,password:h})});if(!n.ok){const a=await n.json();throw new Error(a?.error||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ")}i(),o()}catch(t){l(t.message)}finally{j(!1)}};return e.jsx("div",{className:"aam_modal",children:e.jsxs("div",{className:"aam_modal__content",children:[e.jsx("h3",{className:"aam_modal__title",children:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°"}),c&&e.jsx("p",{className:"aam_modal__error",children:c}),e.jsx("input",{className:"aam_modal__input",type:"text",placeholder:"Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ",value:d,onChange:t=>x(t.target.value)}),e.jsx("input",{className:"aam_modal__input",type:"password",placeholder:"ÐŸÐ°Ñ€Ð¾Ð»ÑŒ",value:h,onChange:t=>_(t.target.value)}),e.jsxs("div",{className:"aam_modal__actions",children:[e.jsx(p,{type:"submit",variant:"green",label:u?"Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ...":"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ",onClick:m,disabled:u}),e.jsx(p,{type:"reset",variant:"green",label:"ÐžÑ‚Ð¼ÐµÐ½Ð°",onClick:o})]})]})})}function N({admin:o,onClose:i,onUpdated:d}){const[x,h]=s.useState(o.username),[_,u]=s.useState(""),[j,c]=s.useState(!1),[l,m]=s.useState(""),t=async()=>{c(!0),m("");try{const n=localStorage.getItem("authToken"),a=await fetch(`/api/admin/admins/${o.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({username:x,password:_||void 0})});if(!a.ok){const r=await a.json();throw new Error(r?.error||"ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ")}d(),i()}catch(n){m(n.message)}finally{c(!1)}};return e.jsx("div",{className:"aam_modal",children:e.jsxs("div",{className:"aam_modal__content",children:[e.jsx("h3",{className:"aam_modal__title",children:"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°"}),e.jsx("input",{className:"aam_modal__input",type:"text",value:x,onChange:n=>h(n.target.value),placeholder:"Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ"}),e.jsx("input",{className:"aam_modal__input",type:"password",value:_,onChange:n=>u(n.target.value),placeholder:"ÐÐ¾Ð²Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)"}),l&&e.jsx("p",{className:"aam_modal__error",children:l}),e.jsxs("div",{className:"aam_modal__actions",children:[e.jsx(p,{type:"submit",variant:"green",label:"Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ",onClick:t,disabled:j}),e.jsx(p,{type:"reset",variant:"green",label:"ÐžÑ‚Ð¼ÐµÐ½Ð°",onClick:i})]})]})})}function b({onConfirm:o,onCancel:i,username:d}){return e.jsx("div",{className:"aam_modal",children:e.jsxs("div",{className:"aam_modal__content",children:[e.jsx("h3",{className:"aam_modal__title",children:"Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°"}),e.jsxs("p",{className:"aam_modal__text",children:["Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ ",e.jsx("strong",{children:d}),"?"]}),e.jsxs("div",{className:"aam_modal__actions",children:[e.jsx(p,{type:"submit",label:"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ",variant:"danger",onClick:o}),e.jsx(p,{type:"reset",label:"ÐžÑ‚Ð¼ÐµÐ½Ð°",variant:"green",onClick:i})]})]})})}function C(){const{role:o}=f(),[i,d]=s.useState([]),[x,h]=s.useState(!0),[_,u]=s.useState(!1),[j,c]=s.useState(null),[l,m]=s.useState(null);if(o!=="superadmin")return e.jsx("p",{children:"Ð£ Ð²Ð°Ñ Ð½ÐµÑ‚ Ð¿Ñ€Ð°Ð² Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð²."});const t=()=>{h(!0);const a=localStorage.getItem("authToken");fetch("/api/admin/admins",{headers:{Authorization:`Bearer ${a}`}}).then(async r=>{if(!r.ok)throw new Error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…");const g=await r.json();d(g)}).catch(r=>console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð²:",r)).finally(()=>h(!1))};s.useEffect(()=>{t()},[]);const n=async()=>{if(!l)return;const a=localStorage.getItem("authToken");try{const r=await fetch(`/api/admin/admins/${l.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}});if(!r.ok){const g=await r.json();throw new Error(g?.error||"ÐžÑˆÐ¸Ð±ÐºÐ° ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ñ")}m(null),t()}catch(r){alert(r.message)}};return x?e.jsx("p",{children:"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð²..."}):e.jsxs("div",{className:"aam_user-manager",children:[e.jsx("h2",{children:"Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð°Ð¼Ð¸"}),o==="superadmin"&&e.jsx("button",{className:"aam-user-btn aam-user-btn--add",onClick:()=>u(!0),children:"âž• ÐÐ¾Ð²Ñ‹Ð¹ Ð°Ð´Ð¼Ð¸Ð½"}),i.length===0?e.jsxs("p",{children:["ÐÐµÑ‚ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð² Ñ Ñ€Ð¾Ð»ÑŒÑŽ ",e.jsx("code",{children:"admin"}),"."]}):e.jsxs("table",{className:"aam_user-manager__table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"ID"}),e.jsx("th",{children:"Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ"}),e.jsx("th",{children:"Ð Ð¾Ð»ÑŒ"}),e.jsx("th",{children:"Ð¡Ð¾Ð·Ð´Ð°Ð½"}),e.jsx("th",{children:"Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ"})]})}),e.jsx("tbody",{children:i.map(a=>e.jsxs("tr",{children:[e.jsx("td",{children:a.id}),e.jsx("td",{children:a.username}),e.jsx("td",{children:a.role}),e.jsx("td",{children:new Date(a.created_at).toLocaleString("ru-RU")}),e.jsxs("td",{children:[e.jsx("button",{className:"aam-user-btn aam-user-btn--edit",onClick:()=>c(a),children:"âœï¸"}),e.jsx("button",{className:"aam-user-btn aam-user-btn--delete",onClick:()=>m(a),children:"ðŸ—‘ï¸"})]})]},a.id))})]}),_&&e.jsx(y,{onClose:()=>u(!1),onCreated:t}),j&&e.jsx(N,{admin:j,onClose:()=>c(null),onUpdated:t}),l&&e.jsx(b,{username:l.username,onConfirm:n,onCancel:()=>m(null)})]})}export{C as default};
//# sourceMappingURL=UserManager-BegFpF4N.js.map
